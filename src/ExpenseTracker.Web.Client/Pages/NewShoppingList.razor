@page "/shoppinglist/new"
@inject ShoppingListService Service
@inject NavigationManager Navigation

@attribute [Authorize]

<h3>NewShoppingList</h3>

<ShoppingListForm Model="model"
                  OnSave="AddNewShoppingListAsync" />

@code {
    private ShoppingListModel model = new();

    async Task AddNewShoppingListAsync(ShoppingListModel shoppingList)
    {
        try
        {
            await Service.CreateShoppingListAsync(shoppingList);
            model = new();

            Navigation.NavigateTo("shoppinglist");
        }
        catch (Exception ex)
        {
            //TODO gestisco l'eccezione
        }
        finally
        {
            //TODO gestisco il finally
        }
    }
}
